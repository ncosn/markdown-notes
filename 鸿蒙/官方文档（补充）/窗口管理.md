### 窗口的类型

OpenHarmony的窗口分为系统窗口、应用窗口两种基本类型。而应用窗口又分为应用主窗口和应用子窗口。

系统窗口：音量调、壁纸、通知栏、状态栏、导航栏等。

应用主窗口：用于显示应用界面，会在“任务管理界面”显示。

应用子窗口：用于显示应用的弹窗、悬浮窗等辅助窗口，不会在“任务管理界面”显示，应用子窗口的生命周期跟随应用主窗口。



> 权限任务弹窗不会显示在最近任务里，属于权限管理应用，另一个进程



### 窗口的模式

+ **全屏**

  应用主窗口启动时铺满整个屏幕。

+ **分屏**

  当前支持二分屏。两个分屏之间具有分界线，可调整两个部分窗口尺寸

+ **自由窗口**

  可同时显示多个自由窗口，大小和位置可自由改变。



### 窗口层级

**用户界面**

开机动画
	|
截屏
	|
锁屏
	|
系统导航栏
	|
音量面板
	|
下拉面板
	|
系统状态栏
	|
桌面Docker栏
	|
最近任务
	|
桌面卡片
	|
桌面
	|
壁纸





### 管理应用窗口

+ 窗口控制能力
+ 沉浸式：只在全屏窗口生效



#### 设置应用主窗口

在Stage模型下，应用主窗口由UIAbility创建并维护生命周期。在UIAbility的onWindowStageCreate回调中，通过WindowStage获取应用主窗口，即可对其进行属性设置等操作。还可以在应用配置文件中设置应用主窗口的属性，如最大窗口宽度maxWindowWidth等。

**步骤**

1. 获取应用主窗口。

   通过getMainWindow接口获取应用主窗口。

2. 设置主窗口属性。

   可设置主窗口的背景色、亮度值、是否可触等多个属性，开发者可根据需要选择对应的接口。本示例以设置“是否可触”属性为例。

3. 为主窗口加载对应的目标页面。

   通过loadContent接口加载主窗口的目标页面。

```ts
import UIAbility from '@ohos.app.ability.UIAbility';

export default class EntryAbility extends UIAbility {
    onWindowStageCreate(windowStage) {
        // 1.获取应用主窗口。
        let windowClass = null;
        windowStage.getMainWindow((err, data) => {
            if (err.code) {
                console.error('Failed to obtain the main window. Cause: ' + JSON.stringify(err));
                return;
            }
            windowClass = data;
            console.info('Succeeded in obtaining the main window. Data: ' + JSON.stringify(data));
            // 2.设置主窗口属性。以设置"是否可触"属性为例。
            let isTouchable = true;
            windowClass.setWindowTouchable(isTouchable, (err) => {
                if (err.code) {
                    console.error('Failed to set the window to be touchable. Cause:' + JSON.stringify(err));
                    return;
                }
                console.info('Succeeded in setting the window to be touchable.');
            })
        })
        // 3.为主窗口加载对应的目标页面。
        windowStage.loadContent("pages/page2", (err) => {
            if (err.code) {
                console.error('Failed to load the content. Cause:' + JSON.stringify(err));
                return;
            }
            console.info('Succeeded in loading the content.');
        });
    }
};
```



### 其他

应用启动时有两个窗口，一个是startIcon，一个是主窗口



```ts
window.setWindowBackgroudColor();//设置应用背景
await window.setWindowKeepScreenOn(true);//设置屏幕常亮
await window.setWindowSystemBarEnable([]);//设置应用全屏

let props: window.WindowProperties = await window.getWindowProperties();//获取应用展示区域大小
AppStorage.setOrCreate<number>('appWidth', props.windowRect.width);
AppStorage.setOrCreate<number>('appHeight', props.windowRect.height);
```

